{"version":3,"sources":["ImgPreloader.js"],"names":["ImgPreloader","Promise","closure","_this","thenCallback","catchCallback","finallyCallback","then","cb","apply","arguments","catch","finally","setTimeout","error","src","callback","resolve","reject","Error","img","Image","onload","onerror","msg","window"],"mappings":";AA8EeA,aA9Ef,GA8EeA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA9EQ,oBAAZC,QACEA,IAAAA,EAAT,SAAiBC,GACTC,IAAAA,EAAQ,KAERC,EAAe,aACfC,EAAgB,aAChBC,EAAkB,aAEjBC,KAAAA,KAAO,SAASC,GAOVL,MANW,mBAAPK,IACPJ,EAAe,WACXI,EAAGC,MAAMN,EAAOO,WAChBJ,EAAgBG,MAAMN,KAGvBA,GAGNQ,KAAAA,MAAQ,SAASH,GAOXL,MANW,mBAAPK,IACPH,EAAiB,WACbG,EAAGC,MAAMN,EAAOO,WAChBJ,EAAgBG,MAAMN,KAGvBA,GAGNS,KAAAA,QAAU,SAASJ,GAIbL,MAHW,mBAAPK,IACPF,EAAkBE,GAEfL,GAGXU,WAAW,WACH,GAAmB,mBAAZX,EACH,IACAA,EAAQE,EAAcC,GACxB,MAAOS,GACLT,EAAcS,KAGvB,IAIX,SAASd,EAAae,EAAKC,GAChB,OAAA,IAAIf,QAAQ,SAACgB,EAASC,GACrB,IAACH,GAAsB,iBAARA,EACT,MAAA,IAAII,MAAM,2DAGdC,IAAAA,EAAM,IAAIC,MAEhBD,EAAIE,OAAS,WACTL,EAAQG,GAEgB,mBAAbJ,GACPA,EAASI,IAGjBA,EAAIG,QAAU,WACJC,IAAAA,EAAM,uBAEZN,EAAOM,GAEiB,mBAAbR,GACPA,EAAS,KAAMQ,IAIvBJ,EAAIL,IAAMA,IAIlBU,OAAOzB,aAAeA,EAEPA,IAAAA,EAAAA,EAAAA,QAAAA,QAAAA","file":"img-preloader.js","sourceRoot":"../src","sourcesContent":["if (typeof Promise === 'undefined') {\n    function Promise(closure) {\n        var _this = this\n\n        var thenCallback = function() {}\n        var catchCallback = function() {}\n        var finallyCallback = function() {}\n\n        this.then = function(cb) {\n            if (typeof cb === 'function') {\n                thenCallback = function() {\n                    cb.apply(_this, arguments)\n                    finallyCallback.apply(_this)\n                }\n            }\n            return _this\n        }\n\n        this.catch = function(cb) {\n            if (typeof cb === 'function') {\n                catchCallback  = function() {\n                    cb.apply(_this, arguments)\n                    finallyCallback.apply(_this)\n                }\n            }\n            return _this\n        }\n\n        this.finally = function(cb) {\n            if (typeof cb === 'function') {\n                finallyCallback = cb\n            }\n            return _this\n        }\n\n        setTimeout(function() {\n            if (typeof closure === 'function') {\n                try {\n                    closure(thenCallback, catchCallback)\n                } catch (error) {\n                    catchCallback(error)\n                }\n            }\n        }, 0)\n    }\n}\n\nfunction ImgPreloader(src, callback) {\n    return new Promise((resolve, reject) => {\n        if (!src || typeof src !== 'string') {\n            throw new Error(\"ImgPreloader Error: expected first argument to be a URL\")\n        }\n\n        const img = new Image()\n\n        img.onload = () => {\n            resolve(img)\n\n            if (typeof callback === 'function') {\n                callback(img)\n            }\n        }\n        img.onerror = () => {\n            const msg = \"Failed to load image\"\n\n            reject(msg)\n\n            if (typeof callback === 'function') {\n                callback(null, msg)\n            }\n        }\n\n        img.src = src\n    })\n}\n\nwindow.ImgPreloader = ImgPreloader\n\nexport default ImgPreloader"]}